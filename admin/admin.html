<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡πÄ‡∏û‡∏¥‡πà‡∏° Stock ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: sans-serif; padding: 1rem; background: #f7f7f7; }
    h2 { text-align: center; }
    .product {
      display: flex; justify-content: space-between;
      margin-bottom: 10px; background: white;
      padding: 10px; border-radius: 8px;
      box-shadow: 0 0 5px #ccc;
    }
    input[type="number"] {
      width: 60px; padding: 4px;
      border: 1px solid #ccc; border-radius: 5px;
    }
    button {
      background: #00796b; color: white;
      border: none; padding: 6px 12px;
      border-radius: 6px; cursor: pointer;
    }
    button:hover {
      background: #004d40;
    }
  </style>
</head>
<body>

  <h2>üì¶ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Stock ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
  <div id="productList"></div>

  <script>
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)
    const defaultProducts = Array.from({ length: 100 }, (_, i) => ({
      id: i + 1,
      name: `‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ #${i + 1}`,
      price: 30 + (i % 10) * 5,
      stock: 3 + (i % 8),
      img: `im/${(i % 10) + 1}.jpg`
    }));

    // ‡πÇ‡∏´‡∏•‡∏î stock ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏à‡∏≤‡∏Å localStorage
    let productStock = JSON.parse(localStorage.getItem("productStock"));
    if (!productStock) {
      productStock = defaultProducts.map(p => ({ id: p.id, stock: p.stock }));
      localStorage.setItem("productStock", JSON.stringify(productStock));
    }

    // ‡∏£‡∏ß‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ + stock ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
    const mergedProducts = defaultProducts.map(p => {
      const stockItem = productStock.find(s => s.id === p.id);
      return { ...p, stock: stockItem ? stockItem.stock : p.stock };
    });

    const productList = document.getElementById("productList");

    // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏° stock
    mergedProducts.forEach(product => {
      const item = document.createElement("div");
      item.className = "product";
      item.innerHTML = `
        <div>
          <strong>${product.name}</strong><br>
          ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <span id="stock-${product.id}">${product.stock}</span> ‡∏ä‡∏¥‡πâ‡∏ô
        </div>
        <div>
          <input type="number" id="add-${product.id}" min="1" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°">
          <button onclick="addStock(${product.id})">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
        </div>
      `;
      productList.appendChild(item);
    });

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏° stock ‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï localStorage ‡∏û‡∏£‡πâ‡∏≠‡∏° UI
    function addStock(id) {
      const input = document.getElementById(`add-${id}`);
      const plus = parseInt(input.value);
      if (isNaN(plus) || plus <= 0) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        return;
      }

      const index = productStock.findIndex(p => p.id === id);
      if (index >= 0) {
        productStock[index].stock += plus;
        document.getElementById(`stock-${id}`).textContent = productStock[index].stock;
      } else {
        productStock.push({ id: id, stock: plus });
        document.getElementById(`stock-${id}`).textContent = plus;
      }

      localStorage.setItem("productStock", JSON.stringify(productStock));
      input.value = "";

    }
  </script>
</body>
</html>
