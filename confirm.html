<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style3.css" />
</head>
<body>
  <div class="container">
    <div class="success-icon">тЬЕ</div>
    <h1>р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕кр╕│р╣Ар╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з!</h1>

    <div class="queue-number" id="queueNumber"></div> <!-- р╣Ар╕ер╕Вр╕Др╕┤р╕зр╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Хр╕гр╕Зр╕Щр╕╡р╣Й -->

    <div class="customer-name" id="customerName"></div>
    
    <div class="message">
      <p>р╕Вр╕нр╕Ър╕Др╕╕р╕Ур╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╕Ър╕гр╕┤р╕Бр╕▓р╕г р╣Ар╕гр╕▓р╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Бр╕ер╣Йр╕з</p>
      <p>р╕Бр╕гр╕╕р╕Ур╕▓р╕гр╕нр╕кр╕▒р╕Бр╕Др╕гр╕╣р╣И р╣Ар╕гр╕▓р╕Ир╕░р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Вр╕нр╕Зр╣Гр╕лр╣Йр╕Др╕╕р╕У</p>
    </div>

    <div class="order-summary" id="orderSummary">
      <h3>ЁЯУЛ р╕кр╕гр╕╕р╕Ыр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н</h3>
      <div id="orderItems"></div>
      <div class="total-price" id="totalPrice"></div>
    </div>

    <div class="order-time" id="orderTime"></div>

    <div>
      <a href="index.html" class="btn btn-primary">ЁЯПа р╕Бр╕ер╕▒р╕Ър╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б</a>
      <a href="review.html" class="btn">ЁЯУЭ р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╣Гр╕лр╕бр╣И</a>
    </div>
  </div>

  <script>
    function displayOrderInfo() {
    const lastOrder    = localStorage.getItem("lastOrder");
    const lastCustomer = localStorage.getItem("lastCustomer");
    const lastQueue    = localStorage.getItem("lastQueue");

    if (lastOrder && lastCustomer && lastQueue) {
      // р╣Бр╕кр╕Фр╕Зр╕Кр╕╖р╣Ир╕н
      document.getElementById("customerName").textContent = `ЁЯСд р╕Др╕╕р╕У ${lastCustomer}`;

      // р╣Бр╕кр╕Фр╕Зр╣Ар╕ер╕Вр╕Др╕┤р╕з
      const queueId = `A${lastQueue}`;
      document.getElementById("queueNumber").textContent = `ЁЯз╛ р╣Ар╕ер╕Вр╕Др╕┤р╕зр╕Вр╕нр╕Зр╕Др╕╕р╕У: ${queueId}`;

      // р╣Бр╕кр╕Фр╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓
      const orderItems     = JSON.parse(lastOrder);
      const itemsContainer = document.getElementById("orderItems");
      itemsContainer.innerHTML = orderItems.map(item => `
        <div class="order-item">
          <span>${item.name} x${item.qty}</span>
          <span>${item.qty * item.price} р╕┐</span>
        </div>
      `).join('');

      // р╕гр╕▓р╕Др╕▓р╕гр╕зр╕б
      const total = orderItems.reduce((sum, item) => sum + item.price * item.qty, 0);
      document.getElementById("totalPrice").textContent = `р╕гр╕зр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф: ${total} р╕┐`;

      // р╣Ар╕зр╕ер╕▓
      const orderTime = new Date().toLocaleString('th-TH');
      document.getElementById("orderTime").textContent = `р╣Ар╕зр╕ер╕▓р╕Чр╕╡р╣Ир╕кр╕▒р╣Ир╕З: ${orderTime}`;
    } else {
      window.location.href = "index.html";
    }
  }

  displayOrderInfo();

  // р╣Ар╕Др╕ер╕╡р╕вр╕гр╣Мр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕ер╕▒р╕З 5 р╕Щр╕▓р╕Чр╕╡
  setTimeout(() => {
    localStorage.removeItem("lastOrder");
    localStorage.removeItem("lastCustomer");
  }, 300000);
  </script>
</body>
</html>